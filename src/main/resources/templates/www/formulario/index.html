<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{/www/layout/base}">
<div layout:fragment="MainBase">
  <main class="container py-4">
    <div class="row g-4">

        <!-- Tarjeta del formulario -->
        <div class="col-md-6">
            <div class="bg-light p-4 rounded shadow-sm h-100">
                <h2 class="mb-4 fw-bold">Contacto</h2>

                <form id="formulario">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="telefono" class="form-label fw-bold">Teléfono:</label>
                            <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="Ingrese su número de teléfono" required>
                        </div>
                        <div class="col-md-6">
                            <label for="instagram" class="form-label fw-bold">Instagram:</label>
                            <input type="text" class="form-control" id="instagram" name="instagram" placeholder="Ingrese su usuario de Instagram">
                        </div>

                        <div class="col-md-6">
                            <label for="gmail" class="form-label fw-bold">Gmail:</label>
                            <input type="email" class="form-control" id="gmail" name="gmail" placeholder="Ingrese su correo de Gmail" pattern="[a-z0-9._%+-]+@gmail\\.com" required>
                        </div>
                        <div class="col-md-6">
                            <label for="twitter" class="form-label fw-bold">Twitter:</label>
                            <input type="text" class="form-control" id="twitter" name="twitter" placeholder="Ingrese su usuario de Twitter">
                        </div>

                        <div class="col-md-6">
                            <label for="especialidad" class="form-label fw-bold">Especialidad:</label>
                            <select class="form-select" id="especialidad" name="especialidad" required>
                                <option value="" disabled selected>Seleccione una opción</option>
                                <option value="desarrollo-web">Desarrollo Web</option>
                                <option value="ciberseguridad">Ciberseguridad</option>
                                <option value="soporte-tecnico">Soporte Técnico</option>
                                <option value="inteligencia-artificial">Inteligencia Artificial</option>
                                <option value="redes">Redes</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="skype" class="form-label fw-bold">Skype:</label>
                            <input type="text" class="form-control" id="skype" name="skype" placeholder="Ingrese su usuario de Skype">
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-dark w-100">Enviar</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Tarjeta del mapa -->
        <div class="col-md-6">
            <div class="bg-light p-4 rounded shadow-sm h-100">
                <h2 class="mb-4 fw-bold">Ubicación</h2>
                <div class="ratio ratio-16x9">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d1807.7939901623633!2d-1.8238370807795352!3d37.173789481198!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1ses!2ses!4v1739474972656!5m2!1ses!2ses"
                            style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>
        </div>
    </div>
</main>
</div>

<script>
    document.getElementById("formulario").addEventListener("submit", function(event) {
        event.preventDefault();
    
        const formData = {
            telefono: document.getElementById("telefono").value.trim(),
            gmail: document.getElementById("gmail").value.trim(),
            especialidad: document.getElementById("especialidad").value.trim(),
            instagram: document.getElementById("instagram").value.trim(),
            twitter: document.getElementById("twitter").value.trim(),
            skype: document.getElementById("skype").value.trim()
        };
    
        fetch("http://localhost:8080/api/formulario/guardar", {
            method: "POST",
            headers: { 
                "Content-Type": "application/json",
                "Accept": "application/json"
            },
            body: JSON.stringify(formData)
        })
        .then(response => response.json())
        .then(data => {
            alert("Formulario guardado con éxito");
            console.log("Respuesta del servidor:", data);
        })
        .catch(error => console.error("Error en fetch():", error));
    });
    </script>
    
    
    
</html>
